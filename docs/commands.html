<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comenzi - Peviitor OpenCode AI Scrapers</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; line-height: 1.6; color: #333; background: #f5f5f5; }
        header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 2rem; text-align: center; }
        header h1 { font-size: 2rem; margin-bottom: 0.5rem; }
        nav { background: #2c3e50; padding: 1rem; position: sticky; top: 0; z-index: 100; }
        nav ul { list-style: none; display: flex; justify-content: center; flex-wrap: wrap; gap: 1rem; }
        nav a { color: white; text-decoration: none; padding: 0.5rem 1rem; border-radius: 4px; }
        nav a:hover { background: #34495e; }
        nav a.active { background: #667eea; }
        main { max-width: 1200px; margin: 2rem auto; padding: 0 1rem; }
        section { background: white; border-radius: 8px; padding: 2rem; margin-bottom: 2rem; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        h2 { color: #2c3e50; border-bottom: 2px solid #667eea; padding-bottom: 0.5rem; margin-bottom: 1rem; }
        h3 { color: #34495e; margin-top: 1.5rem; margin-bottom: 0.5rem; }
        code { background: #f4f4f4; padding: 0.2rem 0.4rem; border-radius: 3px; font-family: monospace; }
        pre { background: #282c34; color: #abb2bf; padding: 1rem; border-radius: 6px; overflow-x: auto; margin: 1rem 0; }
        pre code { background: none; padding: 0; color: inherit; }
        table { width: 100%; border-collapse: collapse; margin: 1rem 0; }
        th, td { padding: 0.75rem; text-align: left; border-bottom: 1px solid #ddd; }
        th { background: #f4f4f4; }
        tr:hover { background: #f9f9f9; }
        .command { background: #667eea; color: white; padding: 0.2rem 0.5rem; border-radius: 4px; font-family: monospace; }
        .step { background: #f9f9f9; padding: 1rem; margin: 0.5rem 0; border-left: 4px solid #667eea; border-radius: 0 6px 6px 0; }
        .note { background: #fff3cd; border-left: 4px solid #ffc107; padding: 1rem; margin: 1rem 0; border-radius: 4px; }
        footer { background: #2c3e50; color: white; text-align: center; padding: 2rem; margin-top: 3rem; }
    </style>
</head>
<body>
    <header>
        <h1>âš¡ Comenzi Personalizate</h1>
    </header>

    <nav>
        <ul>
            <li><a href="index.html">AcasÄƒ</a></li>
            <li><a href="structure.html">Structura Proiectului</a></li>
            <li><a href="commands.html" class="active">Comenzi</a></li>
            <li><a href="tests.html">Teste</a></li>
            <li><a href="schemas.html">Schema Date</a></li>
            <li><a href="setup.html">Setup</a></li>
        </ul>
    </nav>

    <main>
        <section>
            <h2>Comenzi Disponibile</h2>
            <p>Aceste comenzi sunt definite Ã®n <code>.opencode/commands/</code> È™i pot fi folosite Ã®n OpenCode.</p>
            
            <table>
                <tr>
                    <th>ComandÄƒ</th>
                    <th>Descriere</th>
                </tr>
                <tr>
                    <td><code>/scrape</code></td>
                    <td>RuleazÄƒ scraper-ul pentru o companie specificÄƒ</td>
                </tr>
                <tr>
                    <td><code>/update-solr</code></td>
                    <td>ActualizeazÄƒ indexul Solr cu date noi</td>
                </tr>
                <tr>
                    <td><code>/delete-solr</code></td>
                    <td>È˜terge documente job din Solr</td>
                </tr>
                <tr>
                    <td><code>/login-solr</code></td>
                    <td>Deschide panoul de admin Solr</td>
                </tr>
                <tr>
                    <td><code>/add-website</code></td>
                    <td>AdaugÄƒ o nouÄƒ companie Ã®n websites.md</td>
                </tr>
                <tr>
                    <td><code>/docs-update</code></td>
                    <td>ActualizeazÄƒ documentaÈ›ia proiectului</td>
                </tr>
                <tr>
                    <td><code>/instructions</code></td>
                    <td>AfiÈ™eazÄƒ instrucÈ›iunile pentru AI</td>
                </tr>
                <tr>
                    <td><code>/remove-404</code></td>
                    <td>ValideazÄƒ URL-uri job È™i È™terge job-urile inactive</td>
                </tr>
                <tr>
                    <td><code>/clean-project</code></td>
                    <td>CurÄƒÈ›Äƒ fiÈ™ierele temporare È™i actualizeazÄƒ documentaÈ›ia</td>
                </tr>
            </table>
        </section>

        <section>
            <h2><span class="command">/scrape [nume_companie]</span></h2>
            <p>RuleazÄƒ scraper-ul pentru o companie specificÄƒ.</p>
            
            <h3>Utilizare:</h3>
            <pre><code>/scrape EPAM
/scrape ENDAVA
/scrape "EPAM SYSTEMS INTERNATIONAL SRL"</code></pre>
            
            <h3>PaÈ™i:</h3>
            <div class="step">1. CautÄƒ compania Ã®n <code>webscraper/websites.md</code> (cautÄƒ dupÄƒ Brand SAU Company)</div>
            <div class="step">2. DacÄƒ existÄƒ, citeÈ™te fiÈ™ierul scraper specific (ex: epam.md, endava.md)</div>
            <div class="step">3. Deschide Chrome È™i navigheazÄƒ la pagina de cariere</div>
            <div class="step">4. Extrage job-urile conform prompt-ului din scraper file</div>
            <div class="step">5. Extrage tag-urile (seniority + field) conform instrucÈ›iunilor</div>
            <div class="step">6. FormateazÄƒ datele conform Job Schema (fÄƒrÄƒ description!)</div>
            <div class="step">7. Trimite cÄƒtre Solr</div>
            <div class="step">8. ActualizeazÄƒ "Last Scraped" Ã®n websites.md</div>
            
            <div class="note">
                <strong>NotÄƒ:</strong> Pentru fiecare companie existÄƒ un fiÈ™ier scraper Ã®n <code>webscraper/</code> (epam.md, endava.md, bento.md, genpact.md). Acestea conÈ›in instrucÈ›iuni specifice pentru extragerea job-urilor È™i tag-urilor.
            </div>
        </section>

        <section>
            <h2><span class="command">/update-solr</span></h2>
            <p>ActualizeazÄƒ indexul Solr cu date noi.</p>
            
            <h3>Utilizare:</h3>
            <pre><code>/update-solr</code></pre>
            
            <h3>PaÈ™i:</h3>
            <div class="step">1. VerificÄƒ dacÄƒ Solr ruleazÄƒ: <code>curl http://localhost:8983/solr/</code></div>
            <div class="step">2. DacÄƒ nu ruleazÄƒ, porneÈ™te containerul: <code>docker start peviitor-solr</code></div>
            <div class="step">3. AdaugÄƒ/actualizeazÄƒ documente Ã®n Solr folosind API-ul</div>
            <div class="step">4. VerificÄƒ cÄƒ actualizarea a fost fÄƒcutÄƒ cu succes</div>
            
            <h3>Exemplu API:</h3>
            <pre><code>curl -u solr:SolrRocks -X POST -H "Content-Type: application/json" \
  'http://localhost:8983/solr/job/update?commit=true' \
  -d '[{"url":"https://example.com/job","title":"Software Engineer","company":"Example"}]'</code></pre>
        </section>

        <section>
            <h2><span class="command">/login-solr</span></h2>
            <p>Deschide panoul de admin Solr Ã®n Chrome È™i face login.</p>
            
            <h3>Utilizare:</h3>
            <pre><code>/login-solr</code></pre>
            
            <h3>PaÈ™i:</h3>
            <div class="step">1. VerificÄƒ cÄƒ Solr ruleazÄƒ</div>
            <div class="step">2. Deschide Chrome la <code>http://localhost:8983/solr/</code></div>
            <div class="step">3. CompleteazÄƒ formularul de login:</div>
            <div class="step" style="margin-left: 1rem;">- Username: <code>solr</code></div>
            <div class="step" style="margin-left: 1rem;">- Password: <code>SolrRocks</code></div>
            <div class="step">4. VerificÄƒ cÄƒ login-ul a reuÈ™it</div>
            <div class="step">5. Face un screenshot pentru confirmare</div>
        </section>

        <section>
            <h2><span class="command">/delete-solr url:https://example.com/job</span></h2>
            <p>È˜terge documente job din Solr bazat pe o cheie specificÄƒ (implicit: url).</p>
            
            <h3>Utilizare:</h3>
            <pre><code>/delete-solr url:https://example.com/job
/delete-solr company:Test Company
/delete-solr title:Software Engineer</code></pre>
            
            <h3>PaÈ™i:</h3>
            <div class="step">1. VerificÄƒ cÄƒ Solr ruleazÄƒ</div>
            <div class="step">2. ParseazÄƒ cheia È™i valoarea din argumente</div>
            <div class="step">3. Implicit, foloseÈ™te "url" ca cheie</div>
            <div class="step">4. È˜terge documentele care se potrivesc din job core</div>
            <div class="step">5. VerificÄƒ cÄƒ È™tergerea a reuÈ™it</div>
            
            <h3>Exemplu API (corect):</h3>
            <pre><code>curl -u solr:SolrRocks -X POST -H "Content-Type: application/json" \
  'http://localhost:8983/solr/job/update?commit=true' \
  -d '{"delete":{"query":"url:\"https://example.com/job\""}}'</code></pre>
            
            <div class="note">
                <strong>Important:</strong> NU folosi formatul <code>"_delete_":true</code> - acesta nu funcÈ›ioneazÄƒ corect. FoloseÈ™te Ã®ntotdeauna formatul delete-by-query arÄƒtat mai sus.
            </div>
        </section>

        <section>
            <h2><span class="command">/add-website</span></h2>
            <p>AdaugÄƒ o nouÄƒ companie Ã®n fiÈ™ierul websites.md.</p>
            
            <h3>Utilizare:</h3>
            <pre><code>/add-website "Company Name|Brand|https://website.com|https://careers.com|CUI12345678"</code></pre>
            
            <h3>Argumente (separate prin pipe):</h3>
            <ul>
                <li>Numele complet al companiei (ex: "EPAM SYSTEMS INTERNATIONAL SRL")</li>
                <li>Brand-ul (ex: "EPAM")</li>
                <li>URL-ul site-ului companiei (ex: "https://epam.com")</li>
                <li>URL-ul paginii de cariere (ex: "https://careers.epam.com")</li>
                <li>CUI-ul companiei (ex: "33159615")</li>
            </ul>
            
            <h3>PaÈ™i:</h3>
            <div class="step">1. ParseazÄƒ argumentele</div>
            <div class="step">2. CiteÈ™te webscraper/websites.md</div>
            <div class="step">3. AdaugÄƒ un nou rÃ¢nd Ã®n tabel (cu coloanele: Brand, Company, Website, Careers Page, CUI, Last Scraped, Scraper File)</div>
            <div class="step">4. Scrie fiÈ™ierul actualizat</div>
            <div class="step">5. CreeazÄƒ fiÈ™ierul scraper Ã®n webscraper/ (ex: epam.md)</div>
            
            <div class="note">
                <strong>NotÄƒ:</strong> DupÄƒ adÄƒugare, trebuie creat fiÈ™ierul scraper (ex: epam.md) cu instrucÈ›iuni specifice pentru companie.
            </div>
        </section>

        <section>
            <h2><span class="command">/docs-update</span></h2>
            <p>ActualizeazÄƒ documentaÈ›ia proiectului bazat pe toate fiÈ™ierele.</p>
            
            <h3>Utilizare:</h3>
            <pre><code>/docs-update</code></pre>
            
            <h3>PaÈ™i:</h3>
            <div class="step">1. RevizuieÈ™te toate fiÈ™ierele din proiect</div>
            <div class="step">2. ÃnÈ›elege ce face fiecare fiÈ™ier</div>
            <div class="step">3. ActualizeazÄƒ/creeazÄƒ documentaÈ›ia Ã®n folderul docs/</div>
            <div class="step">4. CreeazÄƒ documentaÈ›ie pentru comenzi noi dacÄƒ e necesar</div>
        </section>

        <section>
            <h2><span class="command">/instructions</span></h2>
            <p>AfiÈ™eazÄƒ instrucÈ›iunile pentru AI - fluxuri de lucru, reguli, È™i convenÈ›ii.</p>
            
            <h3>Utilizare:</h3>
            <pre><code>/instructions</code></pre>
            
            <h3>ConÈ›inut:</h3>
            <ul>
                <li>Fluxul de lucru pentru scraping (INSTRUCTIONS.md)</li>
                <li>Schema de date pentru Job È™i Company (SCHEMAS.md)</li>
                <li>ConvenÈ›ii de cod (AGENTS.md)</li>
                <li>Formatul corect pentru Solr delete-by-query</li>
            </ul>
            
            <h3>PaÈ™i:</h3>
            <div class="step">1. CiteÈ™te INSTRUCTIONS.md pentru fluxul de lucru curent</div>
            <div class="step">2. VerificÄƒ regulile pentru fields (ex: nu include description Ã®n Job model)</div>
            <div class="step">3. AplicÄƒ convenÈ›iile de cod din AGENTS.md</div>
            <div class="step">4. UrmeazÄƒ paÈ™ii din INSTRUCTIONS.md pentru task-ul curent</div>
        </section>

        <section>
            <h2><span class="command">/remove-404</span></h2>
            <p>ValideazÄƒ URL-urile job-urilor care nu au fost verificate azi (vdate nu este setat sau vdate este anterior datei de azi). Pentru fiecare URL:
            <ul>
                <li>DacÄƒ returneazÄƒ 404: È™terge job-ul din Solr</li>
                <li>DacÄƒ este valid: actualizeazÄƒ cÃ¢mpul vdate cu data de azi</li>
            </ul>
            </p>
            
            <h3>Utilizare:</h3>
            <pre><code>/remove-404</code></pre>
            
            <h3>PaÈ™i:</h3>
            <div class="step">1. VerificÄƒ cÄƒ Solr ruleazÄƒ: <code>curl -s -u solr:SolrRocks "http://localhost:8983/solr/job/admin/ping"</code></div>
            <div class="step">2. ObÈ›ine data de azi Ã®n format ISO (YYYY-MM-DD): <code>date -u +"%Y-%m-%dT00:00:00Z"</code></div>
            <div class="step">3. InterogheazÄƒ maxim 20 job-uri unde vdate NU este setat SAU vdate este anterior datei de azi</div>
            <div class="step">4. Pentru fiecare URL:</div>
            <div class="step" style="margin-left: 1rem;">a. VerificÄƒ dacÄƒ URL-ul returneazÄƒ 404</div>
            <div class="step" style="margin-left: 1rem;">b. DacÄƒ 404: È™terge job-ul din Solr</div>
            <div class="step" style="margin-left: 1rem;">c. DacÄƒ 200 (valid): actualizeazÄƒ vdate cu data de azi</div>
            <div class="step">5. RaporteazÄƒ rezultatele: "Validated X URLs: Y valid (updated vdate), Z removed (404)"</div>
            
            <h3>Exemplu API - Interogare jobs pentru verificare:</h3>
            <pre><code>curl -s -u solr:SolrRocks "http://localhost:8983/solr/job/select?q=(*:*+NOT+vdate:*)++OR++vdate:[*+TO+2026-02-18T23:59:59Z]&rows=20&fl=url,vdate"</code></pre>
            
            <h3>Exemplu API - Verificare 404:</h3>
            <pre><code>curl -s -o /dev/null -w "%{http_code}" "https://example.com/job"</code></pre>
            
            <h3>Exemplu API - Actualizare vdate (URL valid):</h3>
            <pre><code>curl -u solr:SolrRocks -X POST -H "Content-Type: application/json" \
  'http://localhost:8983/solr/job/update?commit=true' \
  -d '[{"url":"https://example.com/job","vdate":"2026-02-19T00:00:00Z"}]'</code></pre>
            
            <h3>Verificare cu Chrome (pentru "not available"):</h3>
            <ul>
                <li>FoloseÈ™te Chrome DevTools MCP doar dacÄƒ curl returneazÄƒ 200 dar trebuie verificat conÈ›inutul paginii</li>
                <li>Deschide pagina Ã®n Chrome folosind MCP</li>
                <li>FoloseÈ™te chrome-devtools_take_snapshot pentru aè·å– conÈ›inutul paginii</li>
                <li>CautÄƒ mesaje precum: "not available", "no longer available", "expired", "closed", "this job is not active"</li>
            </ul>
            
            <h3>Exemplu API - È˜tergere (URL 404):</h3>
            <pre><code>curl -u solr:SolrRocks -X POST -H "Content-Type: application/json" \
  'http://localhost:8983/solr/job/update?commit=true' \
  -d '{"delete":{"query":"url:\"https://example.com/job\""}}'</code></pre>
            
            <div class="note">
                <strong>Important:</strong>
                <ul>
                    <li>LimiteazÄƒ la 20 URL-uri per execuÈ›ie pentru a evita timeout-urile</li>
                    <li>CÃ¢mpul vdate stocheazÄƒ data ultimei verificÄƒri (format ISO8601)</li>
                    <li>URL-urile verificate azi vor fi ignorate Ã®n urmÄƒtoarea execuÈ›ie</li>
                    <li>NU folosi formatul <code>"_delete_":true</code> - foloseÈ™te Ã®ntotdeauna formatul delete-by-query</li>
                    <li>CÃ¢nd status="tested", setat È™i expirationdate = vdate + 30 zile</li>
                </ul>
            </div>
        </section>

        <section>
            <h2><span class="command">/clean-project</span></h2>
            <p>CurÄƒÈ›Äƒ proiectul prin È™tergerea fiÈ™ierelor temporare È™i actualizarea documentaÈ›iei.</p>
            
            <h3>Utilizare:</h3>
            <pre><code>/clean-project</code></pre>
            
            <h3>PaÈ™i:</h3>
            <div class="step">1. È˜terge fiÈ™ierele temporare PowerShell (*.ps1 care nu sunt necesare)</div>
            <div class="step">2. È˜terge fiÈ™ierele JSON temporare (*_jobs.json)</div>
            <div class="step">3. È˜terge node_modules È™i rezultatele testelor (pot fi recreate)</div>
            <div class="step">4. ActualizeazÄƒ documentaÈ›ia HTML Ã®n folderul docs/</div>
            <div class="step">5. VerificÄƒ È™i È™terge foldere goale</div>
            
            <h3>FiÈ™iere È™terse:</h3>
            <ul>
                <li>push_levi9.ps1, process_ddroidd.ps1, scripts/</li>
                <li>levi9_jobs.json, artsoft_jobs.json, yardi_jobs.json</li>
                <li>tests/node_modules/, tests/package-lock.json</li>
                <li>.opencode/node_modules/, .opencode/bun.lock</li>
            </ul>
            
            <h3>FiÈ™iere pÄƒstrate:</h3>
            <ul>
                <li>start-chrome.ps1 (necesar)</li>
                <li>webscraper/ (prompts companii)</li>
                <li>docs/ (documentaÈ›ie)</li>
                <li>tests/*.test.ts (surse teste)</li>
                <li>.opencode/commands/*.md (comenzi)</li>
            </ul>
            
            <h3>Pentru a restaura node_modules:</h3>
            <pre><code>cd tests && npm install</code></pre>
        </section>

        <section>
            <h2>Cum FuncÈ›ioneazÄƒ</h2>
            <p>Comenzile sunt definite Ã®n fiÈ™iere Markdown Ã®n <code>.opencode/commands/</code>. Fiecare fiÈ™ier conÈ›ine:</p>
            <ul>
                <li>Descrierea comenzii</li>
                <li>Agentul care va executa comanda</li>
                <li>PaÈ™ii detaliaÈ›i de executat</li>
            </ul>
            
            <h3>Exemplu - scrape.md:</h3>
            <pre><code>---
description: Run scraper for a company
agent: build
---

Run the peviitor scraper for the company specified in $ARGUMENTS.

Steps:
1. First, check if the company exists in websites.md
2. If found, use the careers page URL to scrape jobs
3. Format the data according to the Job model schema
4. Push the data to Solr using the job core</code></pre>
        </section>
    </main>

    <footer>
        <p>ğŸ“… Ultima actualizare: Feb 2026</p>
    </footer>
</body>
</html>
